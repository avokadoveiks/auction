<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
	<title>–ê—É–∫—Ü–∏–æ–Ω–Ω–∞—è –∏–≥—Ä–∞ v1.2.0</title>
	<link rel="manifest" href="/js/manifest.json" />
	<link rel="apple-touch-icon" href="/assets/icons/icon-192.png" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
	<meta name="apple-mobile-web-app-title" content="–ê—É–∫—Ü–∏–æ–Ω" />
            <link rel="stylesheet" href="css/v1.css?v=2025-10-29-full-height">
    <link rel="stylesheet" href="css/bank.css?v=2025-10-27-safe-area-v2">
    <style>
        /* –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: body –±–µ–∑ bottom padding */
        html {
            height: 100vh !important;
            overflow: hidden !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        body {
            margin: 0 !important;
            padding: 0 !important;
            padding-bottom: 0 !important;
            height: 100vh !important;
            min-height: 100vh !important;
            max-height: 100vh !important;
            overflow: hidden !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        #app-rotate {
            display: flex !important;
            flex-direction: column !important;
            height: 100% !important;
            overflow: hidden !important;
        }
        
        /* –ù–∏–∂–Ω–∏–π –±–∞—Ä –ë–ï–ó –æ—Ç—Å—Ç—É–ø–∞ —Å–Ω–∏–∑—É */
        .top-bar,
        .bottom-bar {
            margin: 4px 14px !important;
        }
        
        .bottom-bar {
            margin-bottom: 0 !important;
            padding-bottom: max(6px, env(safe-area-inset-bottom, 0px)) !important;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã –±–µ–∑ padding —Å–Ω–∏–∑—É */
        .game-container {
            flex: 1 !important;
            min-height: 0 !important;
            padding: 0 14px !important;
            margin: 0 !important;
        }
        
        .column-titles {
            max-width: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .columns-container {
            flex: 1 !important;
            max-width: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        
        .column {
            height: 100% !important;
        }
        
        /* –†–µ–∑–µ—Ä–≤–Ω—ã–π —è–∫–æ—Ä—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ - –Ω–µ–≤–∏–¥–∏–º—ã–π */
        #spectator-pot {
            position: fixed !important;
            bottom: 50px !important;
            right: 50px !important;
            width: 1px !important;
            height: 1px !important;
            opacity: 0 !important;
            pointer-events: none !important;
            z-index: -1 !important;
        }
        
        /* –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ô –ü–û–í–û–†–û–¢ –í PORTRAIT - –∏–≥—Ä–∞ –≤—Å–µ–≥–¥–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ */
    @media screen and (orientation: portrait) {
            html, body { 
                height: 100vh !important;
                width: 100vw !important;
                overflow: hidden !important;
                position: fixed !important;
                margin: 0 !important;
                padding: 0 !important;
                background: #0f1320 !important;
            }
            
            #app-rotate, #loginOverlay {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vh !important;
                height: 100vw !important;
                transform-origin: top left !important;
                transform: rotate(90deg) translateY(-100vh) !important;
                overflow: hidden !important;
                -webkit-overflow-scrolling: touch !important;
                /* Safe-area –æ—Ç—Å—Ç—É–ø—ã: –ø–æ—Å–ª–µ –ø–æ–≤–æ—Ä–æ—Ç–∞ left/right = top/bottom */
                padding: 0 !important;
                margin: 0 !important;
                box-sizing: border-box !important;
                display: flex !important;
                flex-direction: column !important;
            }
            
            #app-rotate .top-bar {
                margin: 4px max(14px, env(safe-area-inset-top, 0px)) !important;
                margin-top: max(4px, env(safe-area-inset-left, 0px)) !important;
            }
            
            #app-rotate .bottom-bar {
                margin: 0 max(14px, env(safe-area-inset-top, 0px)) 0 max(14px, env(safe-area-inset-top, 0px)) !important;
                margin-top: 4px !important;
                padding-bottom: max(6px, env(safe-area-inset-right, 0px)) !important;
            }
        }
    </style>
        <script>
            (function () {
                var root = document.documentElement;
                var mediaPortrait = window.matchMedia('(orientation: portrait)');
                function toPx(value) {
                    return (value || 0).toFixed(2) + 'px';
                }
                function updateSafeArea() {
                    var vv = window.visualViewport;
                    if (!vv) {
                        return;
                    }
                    var scale = vv.scale || 1;
                    var left = vv.offsetLeft / scale;
                    var top = vv.offsetTop / scale;
                    var right = Math.max(0, (window.innerWidth - vv.width - vv.offsetLeft) / scale);
                    var bottom = Math.max(0, (window.innerHeight - vv.height - vv.offsetTop) / scale);

                    root.style.setProperty('--safe-left', toPx(left));
                    root.style.setProperty('--safe-right', toPx(right));
                    root.style.setProperty('--safe-top', toPx(top));
                    root.style.setProperty('--safe-bottom', toPx(bottom));

                    var isPortrait = mediaPortrait.matches;
                    if (isPortrait) {
                        root.style.setProperty('--rot-safe-top', toPx(left));
                        root.style.setProperty('--rot-safe-bottom', toPx(right));
                        root.style.setProperty('--rot-safe-left', toPx(top));
                        root.style.setProperty('--rot-safe-right', toPx(bottom));
                    } else {
                        root.style.setProperty('--rot-safe-top', toPx(top));
                        root.style.setProperty('--rot-safe-bottom', toPx(bottom));
                        root.style.setProperty('--rot-safe-left', toPx(left));
                        root.style.setProperty('--rot-safe-right', toPx(right));
                    }
                }

                        var vv = window.visualViewport;
                        if (vv) {
                            vv.addEventListener('resize', updateSafeArea);
                            vv.addEventListener('scroll', updateSafeArea);
                        }
                        var portraitListener = function () {
                            setTimeout(updateSafeArea, 200);
                        };
                        if (mediaPortrait.addEventListener) {
                            mediaPortrait.addEventListener('change', portraitListener);
                        } else if (mediaPortrait.addListener) {
                            mediaPortrait.addListener(portraitListener);
                        }
                window.addEventListener('orientationchange', function () {
                    setTimeout(updateSafeArea, 200);
                });
                        window.addEventListener('resize', updateSafeArea);
                window.addEventListener('load', updateSafeArea);
                updateSafeArea();
            })();
        </script>
</head>
<body>
    <!-- LOGIN OVERLAY (shown until Firebase auth succeeds) -->
    <div id="loginOverlay" class="login-overlay" aria-hidden="false">
        <div class="login-card">
            <div class="login-title">–í—Ö–æ–¥ –≤ –∏–≥—Ä—É</div>
            <div class="login-sub">–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –∏–º—è</div>
            <div class="login-buttons">
                <button id="loginApple" class="primary-button" style="width:100%">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Apple</button>
                <button id="loginGoogle" class="ghost-button" style="width:100%">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
                <button id="loginTest" class="ghost-button" style="width:100%">–¢–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</button>
            </div>
            <div id="loginError" class="login-error hidden"></div>
        </div>
    </div>

    <div id="app-rotate">
    <header class="top-bar">
        <div class="player-indicator">
            <div class="avatar avatar-current" id="currentAvatar"></div>
            <div class="player-text">
                <div class="player-name" id="currentName"></div>
                <div class="player-balance" id="currentBalance"></div>
            </div>
        </div>
        <div class="top-actions">
            <select id="accountSelector" class="top-select"></select>
            <button class="ghost-button" id="rulesBtn" onclick="openRules()" title="–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã">üìú –ü—Ä–∞–≤–∏–ª–∞</button>
            <button class="ghost-button" data-role="next-account" data-label-full="–°–ª–µ–¥—É—é—â–∏–π –∏–≥—Ä–æ–∫" onclick="nextAccount()">–°–ª–µ–¥—É—é—â–∏–π –∏–≥—Ä–æ–∫</button>
            <button class="ghost-button" data-role="winners-toggle" data-label-full="–¢–æ–ø" onclick="toggleWinners()">–¢–æ–ø</button>
            <button id="nextRoomBtn" class="ghost-button" onclick="goToNextRoom()" title="–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–Ω–∞—Ç–∞"
                style="font-size:10px;padding:4px 8px;line-height:1.05;opacity:.9;white-space:normal;">
                –°–ª–µ–¥—É—é—â–∞—è<br>–∫–æ–º–Ω–∞—Ç–∞ ‚öíÔ∏è
            </button>
        </div>
    </header>

    <main class="game-container">
        <div class="column-titles">
            <div class="column-title">–®–∞–Ω—Å <span class="column-title-icon" aria-hidden="true">‚è≥</span></div>
            <div class="column-title">–õ—é–±–∏—Ç–µ–ª—å</div>
            <div class="column-title">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª</div>
            <div class="column-title">–î—É—ç–ª—å <span class="column-title-icon" aria-hidden="true">‚öîÔ∏è</span></div>
            <div class="column-title">–ú–∞—Å—Ç–µ—Ä</div>
        </div>
        <div class="columns-container">
            <div class="column" data-column="1">
                <div class="bonus-bar hidden" id="bonus-1"></div>
                <div class="column-backdrop" aria-hidden="true"></div>
                <div class="column-bank" id="bank-1"></div>
                <div class="column-body">
                    <div class="bet-info hidden" id="bet-info-1">
                        <div class="bet-name" id="bet-name-1"></div>
                    </div>
                    <div class="inline-hint hidden" id="hint-auto-disabled">–ê–≤—Ç–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤ —ç—Ç–æ–π –∫–æ–ª–æ–Ω–∫–µ</div>
                </div>
                <div class="timer-wrapper">
                    <div class="column-timer" id="timer-1"></div>
                    <div class="bet-pulse hidden" id="pulse-1"></div>
                </div>
                <div class="bet-controls">
                    <button class="primary-button" onclick="makeBet(1)">–°—Ç–∞–≤–∫–∞ 2</button>
                    <button class="ghost-button" id="auto-1" disabled>–ê–≤—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</button>
                </div>
            </div>

            <div class="column" data-column="2">
                <div class="bonus-bar hidden" id="bonus-2"></div>
                <div class="column-backdrop" aria-hidden="true"></div>
                <div class="column-bank" id="bank-2"></div>
                <div class="column-body">
                    <div class="bet-info hidden" id="bet-info-2">
                        <div class="bet-name" id="bet-name-2"></div>
                    </div>
                </div>
                <div class="timer-wrapper">
                    <div class="column-timer" id="timer-2"></div>
                    <div class="bet-pulse hidden" id="pulse-2"></div>
                </div>
                <div class="bet-controls">
                    <button class="primary-button" onclick="makeBet(2)">–°—Ç–∞–≤–∫–∞ 4</button>
                    <button class="ghost-button" id="auto-2" onclick="toggleAuto(2)">–ê–≤—Ç–æ (off)</button>
                </div>
            </div>

            <div class="column" data-column="3">
                <div class="bonus-bar hidden" id="bonus-3"></div>
                <div class="column-backdrop" aria-hidden="true"></div>
                <div class="column-bank" id="bank-3"></div>
                <div class="column-body">
                    <div class="bet-info hidden" id="bet-info-3">
                        <div class="bet-name" id="bet-name-3"></div>
                    </div>
                </div>
                <div class="timer-wrapper">
                    <div class="column-timer" id="timer-3"></div>
                    <div class="bet-pulse hidden" id="pulse-3"></div>
                </div>
                <div class="bet-controls">
                    <button class="primary-button" onclick="makeBet(3)">–°—Ç–∞–≤–∫–∞ 6</button>
                    <button class="ghost-button" id="auto-3" onclick="toggleAuto(3)">–ê–≤—Ç–æ (off)</button>
                </div>
            </div>

            <div class="column" data-column="4">
                <div class="bonus-bar hidden" id="bonus-4"></div>
                <div class="column-backdrop" aria-hidden="true"></div>
                <div class="column-bank" id="bank-4"></div>
                <div class="column-body">
                    <div class="bet-info hidden" id="bet-info-4">
                        <div class="bet-name" id="bet-name-4"></div>
                    </div>
                </div>
                <div class="timer-wrapper">
                    <div class="column-timer" id="timer-4"></div>
                    <div class="bet-pulse hidden" id="pulse-4"></div>
                </div>
                <div class="bet-controls">
                    <button class="primary-button" onclick="makeBet(4)">–°—Ç–∞–≤–∫–∞ 8</button>
                    <button class="ghost-button" id="auto-4" onclick="toggleAuto(4)">–ê–≤—Ç–æ (off)</button>
                </div>
            </div>

            <div class="column" data-column="5">
                <div class="bonus-bar hidden" id="bonus-5"></div>
                <div class="column-backdrop" aria-hidden="true"></div>
                <div class="column-bank" id="bank-5"></div>
                <div class="column-body">
                    <div class="bet-info hidden" id="bet-info-5">
                        <div class="bet-name" id="bet-name-5"></div>
                    </div>
                </div>
                <div class="timer-wrapper">
                    <div class="column-timer" id="timer-5"></div>
                    <div class="bet-pulse hidden" id="pulse-5"></div>
                </div>
                <div class="bet-controls">
                    <button class="primary-button" onclick="makeBet(5)">–°—Ç–∞–≤–∫–∞ 10</button>
                    <button class="ghost-button" id="auto-5" onclick="toggleAuto(5)">–ê–≤—Ç–æ (off)</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bottom-bar">
        <button class="ghost-button" onclick="goToMainMenu()">–ú–µ–Ω—é</button>
        <div class="bottom-spacer"></div>
    <span style="font-size: 10px; opacity: 0.5; margin: 0 8px;">v20</span>
        <button class="primary-icon" onclick="location.reload()" title="–û–±–Ω–æ–≤–∏—Ç—å">üîÑ</button>
        <button class="primary-icon" onclick="toggleChat()">üí¨</button>
    </footer>

    <!-- –†–µ–∑–µ—Ä–≤–Ω—ã–π —è–∫–æ—Ä—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –º–æ–Ω–µ—Ç -->
    <div id="spectator-pot" aria-hidden="true" style="position: fixed; bottom: 50px; right: 50px; width: 1px; height: 1px; opacity: 0; pointer-events: none;"></div>

    <section class="chat-panel" id="chatPanel">
        <div class="chat-header">
            <h3>–ß–∞—Ç –∏–≥—Ä–æ–∫–æ–≤</h3>
            <button class="ghost-button" data-label-full="–ó–∞–∫—Ä—ã—Ç—å" onclick="toggleChat()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏—Ç–µ Enter">
            <button class="primary-button" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>
    </section>

    <aside class="winners-panel" id="winnersPanel">
        <div class="winners-header">
            <h3>–¢–æ–ø</h3>
            <button class="ghost-button" data-label-full="–ó–∞–∫—Ä—ã—Ç—å" onclick="toggleWinners()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
        <div class="winners-tabs">
            <button class="tab-button active" onclick="switchStatsPeriod('recent')">–ù–µ–¥–∞–≤–Ω–∏–µ</button>
            <button class="tab-button" onclick="switchStatsPeriod('24h')">24—á</button>
            <button class="tab-button" onclick="switchStatsPeriod('7d')">7–¥–Ω</button>
            <button class="tab-button" onclick="switchStatsPeriod('1m')">1–º–µ—Å</button>
        </div>
        <div class="winners-list" id="winnersList"></div>
    </aside>
    </div>

    <script src="js/bank-system.js?v=2025-10-20-1"></script>
    <script src="js/bank-ui.js?v=2025-10-20-1"></script>
    <script src="js/realestate-system.js?v=2025-10-27-v1"></script>
    <script src="js/realestate-ui.js?v=2025-10-27-v1"></script>
    <script src="js/v1.js?v=2025-10-28-v1.6.7"></script>

    <!-- Firebase SDK (Compat for simple global usage) -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js" defer></script>
    <!-- Put your real config into firebase-config.js (not committed); example is provided -->
    <script src="js/firebase-config.js" defer></script>
    <script src="src/auth.js?v=2025-10-26-4" defer></script>
    
    <!-- Bot System Integration -->
    <script type="module">
        import { initBotSystem, onBotRoundEnd, emitRoundEnd } from './src/index.js';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –±–æ—Ç–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', async function() {
            const director = await initBotSystem();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ v1.js
            window.botDirector = director;
            window.onBotRoundEnd = onBotRoundEnd;
            window.emitRoundEnd = emitRoundEnd;
            
            console.log('[Game] –°–∏—Å—Ç–µ–º–∞ –±–æ—Ç–æ–≤ –∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
        });
    </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function(){
                navigator.serviceWorker.register('js/sw-v2.js')
                    .then(reg => {
                        console.log('[SW] Registered');
                        
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
                        setInterval(() => {
                            reg.update();
                        }, 1 * 60 * 1000);
                        
                        // –°–ª—É—à–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
                        reg.addEventListener('updatefound', () => {
                            const newWorker = reg.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞!
                                    showUpdateNotification();
                                }
                            });
                        });
                    })
                    .catch(err => console.log('[SW] Registration failed:', err));
                
                // –°–ª—É—à–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç Service Worker
                navigator.serviceWorker.addEventListener('message', event => {
                    if (event.data && event.data.type === 'SW_UPDATED') {
                        console.log('[SW] New version activated:', event.data.version);
                        showUpdateNotification();
                    }
                });
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
            function showUpdateNotification() {
                const notification = document.createElement('div');
                notification.innerHTML = `
                    <div style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10000; background: linear-gradient(135deg, #3f82ff, #79a8ff); color: #fff; padding: 16px 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(63, 130, 255, 0.4); display: flex; align-items: center; gap: 12px; font-family: var(--font); max-width: 90vw;">
                        <span>üéâ –î–æ—Å—Ç—É–ø–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ!</span>
                        <button onclick="location.reload()" style="background: rgba(255,255,255,0.95); color: #3f82ff; border: none; padding: 8px 16px; border-radius: 8px; font-weight: 600; cursor: pointer; font-family: inherit;">
                            –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                        <button onclick="this.closest('div').parentElement.remove()" style="background: transparent; color: rgba(255,255,255,0.8); border: 1px solid rgba(255,255,255,0.3); padding: 8px 12px; border-radius: 8px; cursor: pointer; font-family: inherit;">
                            –ü–æ–∑–∂–µ
                        </button>
                    </div>
                `;
                document.body.appendChild(notification);
                
                // –ê–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    if (notification.parentElement) notification.remove();
                }, 10000);
            }
        }
    </script>

    <!-- Rules Popup (Fullscreen) -->
    <div id="rulesPopup" class="rules-fullscreen" style="display: none;">
        <div class="rules-overlay" onclick="closeRules()"></div>
        <div class="rules-panel">
            <div class="rules-header">
                <h2>üìú –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
                <button class="rules-close" onclick="closeRules()">‚úï</button>
            </div>
            <div class="rules-content">
                <div class="rules-grid">
                    <div class="rule-item">
                        <div class="rule-icon">üé≤</div>
                        <h3>–®–∞–Ω—Å</h3>
                        <p>–í—Ä–µ–º—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–µ. –í–æ–∑–º–æ–∂–Ω–∞ –¥–æ—Å—Ä–æ—á–Ω–∞—è –ø–æ–±–µ–¥–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç–∞–≤–∫–∞—Ö.</p>
                        <div class="rule-stats" id="rulesStatsCol1"></div>
                    </div>
                    
                    <div class="rule-item">
                        <div class="rule-icon">üéØ</div>
                        <h3>–õ—é–±–∏—Ç–µ–ª—å</h3>
                        <p>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∏–≥—Ä–∞. –ü–æ–±–µ–¥–∞ –¥–æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –∏–≥—Ä–æ–∫—É –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞.</p>
                        <div class="rule-stats" id="rulesStatsCol2"></div>
                    </div>
                    
                    <div class="rule-item">
                        <div class="rule-icon">‚ö°</div>
                        <h3>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª</h3>
                        <p>–£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Ç–∞–π–º–µ—Ä–æ–º. –ß–∏—Å—Ç–∞—è —Ä–µ–∞–∫—Ü–∏—è –∏ —Å–∫–æ—Ä–æ—Å—Ç—å.</p>
                        <div class="rule-stats" id="rulesStatsCol3"></div>
                    </div>
                    
                    <div class="rule-item">
                        <div class="rule-icon">‚öîÔ∏è</div>
                        <h3>–î—É—ç–ª—å</h3>
                        <p>–¢–æ–ª—å–∫–æ 2 –∏–≥—Ä–æ–∫–∞ –º–æ–≥—É—Ç —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç—å—Å—è. –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –∑–∞–±–∏—Ä–∞–µ—Ç –≤–µ—Å—å –±–∞–Ω–∫.</p>
                        <div class="rule-stats" id="rulesStatsCol4"></div>
                    </div>
                    
                    <div class="rule-item">
                        <div class="rule-icon">üëë</div>
                        <h3>–ú–∞—Å—Ç–µ—Ä</h3>
                        <p>–î–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º –∏–≥—Ä–æ–∫–∞–º. –°—Ç–∞–≤–∫–∏ –≤—ã—à–µ –∏ –ø—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥ –±–æ–ª—å—à–µ.</p>
                        <div class="rule-stats" id="rulesStatsCol5"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openRules() {
            const popup = document.getElementById('rulesPopup');
            if (!popup) return;
            
            // Update stats from COLUMNS config
            if (typeof COLUMNS !== 'undefined') {
                COLUMNS.forEach(col => {
                    const statsEl = document.getElementById(`rulesStatsCol${col.id}`);
                    if (!statsEl) return;
                    
                    let baseTimer = 30;
                    if (typeof getBaseTimerForColumn === 'function') {
                        baseTimer = getBaseTimerForColumn(col.id);
                    }
                    
                    statsEl.innerHTML = `
                        <div>üí∞ –°—Ç–∞–≤–∫–∞: ${col.bet} –º–æ–Ω–µ—Ç</div>
                        <div>‚è±Ô∏è –ë–∞–∑–æ–≤—ã–π —Ç–∞–π–º–µ—Ä: ${baseTimer}—Å</div>
                        <div>üè¶ –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–∞–Ω–∫: ${col.baseBank} –º–æ–Ω–µ—Ç</div>
                    `;
                });
            }
            
            popup.style.display = 'flex';
            setTimeout(() => popup.classList.add('active'), 10);
        }
        
        function closeRules() {
            const popup = document.getElementById('rulesPopup');
            if (!popup) return;
            
            popup.classList.remove('active');
            setTimeout(() => popup.style.display = 'none', 300);
        }
    </script>
</body>
</html>